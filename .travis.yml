language: python
python:
- '3.6'
install:
- pip install ansible==2.6.4 molecule apache-libcloud
script:
- molecule create --debug --scenario-name gce
- molecule converge --scenario-name gce
- molecule verify --scenario-name gce
after_script:
- molecule destroy --scenario-name gce
notifications:
  slack:
    secure: 5plFOSAh7l9km+uT/vkNmqiffEEDkCyddgFuyoQQLKUIHzGmE0v+sz3QTDxrI3iFIpsixUOL55RQrRIcETqqWX36mB6RQdmfkoDGcx+N5Ez5fUxbVsILgK+/E7Y4d4hEmXe3yc9aIyg3ltvX5pU0PnzejENBUoKWIkQLJZNjzkwFGGjKMnm/csPWhBg0RwdQko2szFOcgyk7Lp1K9/N6cWYE6LvygCdI20aeYwZniqMSCJQIeEBoJ/hlo/48gMlkvGEUS5o6KC8gi0Ccr8OtJHo6weGp/CUZjYlZaEWGXJZ7iiT/s2MSk8YXEOeppip78WKVIIQW8D3Gc/IqDahN6iwWwLgO1HUzcIUzyv328yiocwhzGfbKAp7YkE24pN/WmWr59B7gTi274df5V8pN52y1BD+4bRJFSP9AbUARqeUocusefDyVl4GzJoobu1LeD0O+Y1AZtmJ4GXjlp/YvGtwJV9pH5ihInDVUtPDMSJP2Qb4UkHU9anD/LHn6JG/B+/Fq6FJoA5hcQ9WtBGXFbsJHZJ8ZGqYJFdWYD5a6zdcYLPSphohMeo3FUVYtNL/WfNMUFFQjnqZywDEtr4po2bHuSMuBFN2fgnurWH3R10gRSRD/6ISSWYLPsdRbV4SrjmATYrN7Ud/AffUTj17IBmNgoMyQuIUc183YyZuVtw8=
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/iconic-rampart-206317-e901335a4f6e.json"
  global:
  - secure: izlCopzPTKE2ABK4xGmClmop2kz5Xb4gWHyttiihOqNhDqtHbFHiTs36C7a83V3CrLcteabXDg8A+je/OEX3BhHxFv0mnoWc72v1dz+AMrC1/CqMIwloly/VfRvae8RNtIE5+3/T7sL0A1A3i1QFqy4zcZ1iIvND2A9uTdNh/qRrcd19ApsP3dkJaerp2ZXxcMq1vNDPfmYKiK+8Xl8C0pCSVbdvOrlwRI3X5d7g6NumDTeDf2RmVw0LyeCnax13CdoAStWbZxYOrPnUJJiCbc8ywgHq5BJidT+16pQr9nG1YekjnTHlXUFazj1NyYi4KeCF0k3U3WFmlzFfC1z9RjtutWHGSlA2cLNNjK+u6aYMG24XePdHHZeu/r79ppILy6LiWkeG1pyPzfTSOw5dOwFHEqGuYLRMdBaKplTmOFZYh3KR9VG9Yn8lCUiABVoTy0djrcXflhefUkzomBr8JnZJoYCC2BLkM5zUbGpFaE+5OYznAyJzl3lvD7hsqA+fN71Onj9Vvv3Ju9xWrmgn0s4KDnxaQQQfO48jrg2j6V0aOlgivB+dQMn6KWhMkkapl3F+Fm0E/U1tmDi2m67SljcVIWu8ULwfmhYpLhGfyEtTSfwKs+nsApMeAyp70NQtqVLge0Ia02RgGcey1MpBG37znLgckUOTwLoHlSZsgLY=
  - secure: 3SezG5FQlayuZsGPxovwbk5C4PMDNqdXOE08CSlX0MRbXZHGJIPBuorHhkXKnNmpbJcRJxknVIvWEkeJmCVzsud6WQIR3JCGhUjVBanfJP40gdsQGi3LQ8oKq/Gb6An60NgLR2nKpG9nAjwDwGU+RhkThXrLWQoBwcPnhuPNh1McAMKXPBCFdIETa5yJbdynwvkGPMjeSwn16JMY18samFNFqxk15ZW8f4gjIMjeGp5qGbbq/TlmYhGtN0eg/DBx9G3PA1vaSE7lzwgsMJ3XIYnd9DGFYjDykcTEnbFEL6wUlPXxHTce29puKtr+FhIUjNfSgXthPbTHHRvhk8VB/YD8o1cfCrVDmHsVHNLL6uOJZpBsatZHpfuOSoG5qA7sBFfUa6AkheeZ7Odji6L3a25sSoaTq8fKRx59Cx1dirC83TlOjZg0yqub18Q98rUKC/IC4mNiRnPm3X3deJuAMIjX0zCXTzgWqsvSptR2dVpUZyuGPL/Th0tX8gH/ilQIcMLfJDa+e0sgVhoCm36JPgaBzaQxUuFYQZf7nzw8fUFEJU493i/FABckisFf++cYvQLOETxOrPwQyTFgcETzeI7ESh56nftHGpQlv1Tn7lJE4DwGSSEtgm4AIbvv1Wt5LIqghCfOxlCYsZeQh/6Vnh+pUXCzPVmi4SLKCul+gIk=
  - secure: 3Gw1Wqaicma5NLBFyW61/v7vSiK8ZTIBTq9Fw4yzlxjicnXLWC7DdK6BKAY16FRG/lXn1kAUnBcL/4/Q7Oxk5jTtMHi5Z9m61x3t2sCgKEiOUZzMRPeAchkk1+uim0uf757TVQLx+n2FCxozqnbjGDFAf7jmzYcHY9KEMr2HeOyfUK5MTYXUWvERZ78Tq0swTGUXn0bGaj5tNAa2oqpURkl/rX17N1PprffAZ3pWMv63qTkOzLFcwVCIIh3tWkfyii9UjQIyftU09NeyaY7EQMOOtiT2MXF7NvHJwk+ecxKNpdgBh+uvnUmIyQWZPA34dQZOixg9mmtt5I2Sap3UemYoRJ1tgqUhSvoq6XJUTryXSdwcG365UJ1MOWX/EfBx7RAzr7iZCNo7ms5PasjJ93zbdtkmhYLV/rCF8m7hEUZn5vF7dXZ+TpA+rRAApJcrVgCz24LvrTjCv2VkkrJ/yVk6oLoBSLtSvmkRaro64TOg+T1HdgQwdTOLZXL1ox0RYwhwQwKdLLZY4ygykI48HnNuhSNx/EE7iussxKwF8x1w+RUakUr5VP9SulthTSSPfE5U1VF+tVyoaHLwuAKuDDWvlEm3JAEqJr259ny2e9BpfUl7FYvBFNNopajQZV13MD5Y8htzAFZslFNgLQ1nXD6Awgf2KLN6T/uViNuNb6I=
before_install:
- openssl aes-256-cbc -K $encrypted_588c62e25c03_key -iv $encrypted_588c62e25c03_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
